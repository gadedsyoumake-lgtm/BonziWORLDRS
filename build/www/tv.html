<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BonziTV</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    overflow: hidden;
    background: black;
  }
  #bonzitv {
    width: 100%;
    height: 100%;
    pointer-events: none;
  }

  .ytp-fullscreen-button {
    display: none !important;
  }
</style>
</head>
<body>
<div id="bonzitv"></div>

<script>
let player;
const introVideo = "BCouBFCB8QA"; 

// Separate arrays for shows and idents
const shows = [
  // Inanimate Insanity Season 2 episodes
  "HaZOd_EY1Ks", "HaZOd_EY1Ks", "HaZOd_EY1Ks", "HaZOd_EY1Ks",
];

const idents = [
  // All idents available
  "o6yx9jNrZf0", "VPReO6ZaNe4", 
];

// Choose which ident to use (change this index to use a different ident)
const currentIdentIndex = 0; // 0 = first ident, 1 = second ident, etc.
let currentIdent = idents[currentIdentIndex];
let shouldPlayIdentNext = true; // Track when to play ident

function onYouTubeIframeAPIReady() {
  createPlayer(introVideo);
}

function createPlayer(videoId) {
  player = new YT.Player('bonzitv', {
    videoId: videoId,
    playerVars: {
      autoplay: 1,
      controls: 0,
      modestbranding: 1,
      rel: 0,
      fs: 0,
      showinfo: 0,
      disablekb: 1,
      playsinline: 1
    },
    events: {
      'onReady': onPlayerReady,
      'onStateChange': onPlayerStateChange,
      'onError': onPlayerError
    }
  });
}

function onPlayerReady(event) {
  event.target.playVideo();
  enforcePlay();
  preventFullscreen();
  disableInteraction();
}

// Force video to keep playing
function onPlayerStateChange(event) {
  if (event.data === YT.PlayerState.ENDED) {
    if (shouldPlayIdentNext) {
      // Play ident after show
      setTimeout(() => {
        player.loadVideoById(currentIdent);
        shouldPlayIdentNext = false;
      }, 100);
    } else {
      // Play random show after ident
      setTimeout(() => {
        playRandomShow();
        shouldPlayIdentNext = true;
      }, 100);
    }
  }
  if (event.data === YT.PlayerState.PAUSED) {
    player.playVideo();
  }
}

function playRandomShow() {
  let nextShow = shows[Math.floor(Math.random() * shows.length)];
  player.loadVideoById(nextShow);
}

function onPlayerError(event) {
  console.warn("Video unavailable, skipping to next video.");
  if (player.getVideoData().video_id === currentIdent) {
    // If ident fails, go straight to a show
    playRandomShow();
    shouldPlayIdentNext = true;
  } else {
    // If show fails, play the ident
    player.loadVideoById(currentIdent);
    shouldPlayIdentNext = false;
  }
}

function enforcePlay() {
  setInterval(() => {
    if (player && player.getPlayerState() !== YT.PlayerState.PLAYING) {
      player.playVideo();
    }
  }, 100);
}

function preventFullscreen() {
  const iframe = document.querySelector('#player iframe');
  if (iframe) iframe.setAttribute('allowfullscreen', 'false');
  document.addEventListener('keydown', e => {
    if (e.key === 'F11') e.preventDefault();
  });
  document.addEventListener('fullscreenchange', () => {
    if (document.fullscreenElement) document.exitFullscreen();
  });
}

function disableInteraction() {
  document.addEventListener('contextmenu', e => e.preventDefault());
  document.addEventListener('keydown', e => {
    const blockedKeys = [' ', 'ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown', 'k', 'j', 'l', 'f', 'm'];
    if (blockedKeys.includes(e.key)) e.preventDefault();
  });
}
</script>

<script src="https://www.youtube.com/iframe_api"></script>
</body>
</html>
